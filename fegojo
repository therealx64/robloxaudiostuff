local player = game.Players.LocalPlayer

-- Load Animator module
if not getgenv()["Animator"] then
	loadstring(game:HttpGet("https://raw.githubusercontent.com/xhayper/Animator/main/Source/Main.lua"))()
end

local AnimatorModule = getgenv().Animator

-- Animation IDs
local idleAnimId = 132754291302657
local runAnimId = 83050015627222

local idleAnim, runAnim
local isRunning = false

local function setupMovementAnims(character)
	local humanoid = character:WaitForChild("Humanoid")

	idleAnim = AnimatorModule.new(character, idleAnimId)
	idleAnim.Looped = true
	idleAnim:Play()

	runAnim = AnimatorModule.new(character, runAnimId)
	runAnim.Looped = true

	game:GetService("RunService").RenderStepped:Connect(function()
		if not humanoid or humanoid.Health <= 0 then return end

		local moving = humanoid.MoveDirection.Magnitude > 0

		if moving and not isRunning then
			isRunning = true
			if idleAnim then idleAnim:Stop() end
			if runAnim then runAnim:Play() end
		elseif not moving and isRunning then
			isRunning = false
			if runAnim then runAnim:Stop() end
			if idleAnim then idleAnim:Play() end
		end
	end)

	humanoid.Died:Connect(function()
		if idleAnim then idleAnim:Stop() end
		if runAnim then runAnim:Stop() end
	end)
end

if player.Character then
	setupMovementAnims(player.Character)
end
player.CharacterAdded:Connect(setupMovementAnims)
-------------------------------------------------
local player = game.Players.LocalPlayer
local backpack = player:WaitForChild("Backpack")

-- Create the tool
local tool = Instance.new("Tool")
tool.Name = "Purple Nuke"
tool.RequiresHandle = false
tool.Parent = backpack

writefile("Nuke.mp3", game:HttpGet("https://github.com/therealx64/robloxaudiostuff/raw/refs/heads/main/Gojo's%20maximum%20hollow%20purple%20-%20Hexal.mp3"))

-- Load Animator if not already loaded
if not getgenv()["Animator"] then
	loadstring(game:HttpGet("https://raw.githubusercontent.com/xhayper/Animator/main/Source/Main.lua"))()
end

local Anim = nil
local sound = nil

tool.Equipped:Connect(function()
	local character = player.Character
	if character then
		Anim = Animator.new(character, 76602645697562)
		Anim.Looped = false -- prevent looping if supported
		Anim:Play()

		sound = Instance.new("Sound")
		sound.SoundId = getcustomasset("Nuke.mp3")
		sound.Volume = 2
		sound.Looped = false -- âœ… set to false to prevent music loop (optional)
		sound.Parent = character:WaitForChild("HumanoidRootPart")
		sound:Play()
	end
end)

tool.Unequipped:Connect(function()
	if Anim then
		Anim:Stop()
		Anim:Destroy()
	end
	if sound then
		sound:Stop()
		sound:Destroy()
	end
	print("Purple Nuke animation and music stopped")
end)
-----------------------------------------------------
local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer
local PlayerGui = player:WaitForChild("PlayerGui")

-- Load Animator module if not already loaded
if not getgenv()["Animator"] then
	loadstring(game:HttpGet("https://raw.githubusercontent.com/xhayper/Animator/main/Source/Main.lua"))()
end
local AnimatorModule = getgenv().Animator

-- Quotes and animation
local specialAnimId = 115084974046541
local quotes = {
	[Enum.KeyCode.One] = "Ahahahaha, ahahaha!... I'll murder you!",
	[Enum.KeyCode.Two] = "Yaaaaay!",
	[Enum.KeyCode.Three] = "Is that right? Maybe you're right. You are so right!",
	[Enum.KeyCode.Four] = "Guess I'll be a little rough.",
	[Enum.KeyCode.Five] = "Don't worry, I'm the strongest."
}

-- Create the GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "QuoteListGui"
screenGui.Enabled = false
screenGui.ResetOnSpawn = false
screenGui.Parent = PlayerGui

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 250, 0, 150)
frame.Position = UDim2.new(1, -260, 1, -160)
frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
frame.BackgroundTransparency = 0.3
frame.BorderSizePixel = 0
frame.Parent = screenGui

local uiListLayout = Instance.new("UIListLayout")
uiListLayout.Padding = UDim.new(0, 4)
uiListLayout.SortOrder = Enum.SortOrder.LayoutOrder
uiListLayout.Parent = frame

local function createQuoteLabel(order, text)
	local label = Instance.new("TextLabel")
	label.Size = UDim2.new(1, -10, 0, 24)
	label.BackgroundTransparency = 1
	label.TextColor3 = Color3.fromRGB(255, 255, 255)
	label.TextStrokeTransparency = 0.6
	label.TextXAlignment = Enum.TextXAlignment.Left
	label.Font = Enum.Font.SourceSansBold
	label.TextSize = 18
	label.LayoutOrder = order
	label.Text = string.format("[%d] %s", order, text)
	label.Parent = frame
end

createQuoteLabel(1, quotes[Enum.KeyCode.One])
createQuoteLabel(2, quotes[Enum.KeyCode.Two])
createQuoteLabel(3, quotes[Enum.KeyCode.Three])
createQuoteLabel(4, quotes[Enum.KeyCode.Four])
createQuoteLabel(5, quotes[Enum.KeyCode.Five])

-- Track if N is held
local nHeld = false

-- Show GUI and enable input when N is held
UserInputService.InputBegan:Connect(function(input, gameProcessed)
	if input.KeyCode == Enum.KeyCode.N then
		nHeld = true
		screenGui.Enabled = true
	end
end)

-- Hide GUI and disable input when N is released
UserInputService.InputEnded:Connect(function(input)
	if input.KeyCode == Enum.KeyCode.N then
		nHeld = false
		screenGui.Enabled = false
	end
end)

-- Function to say message
local function sayMessage(message)
	ReplicatedStorage.DefaultChatSystemChatEvents.SayMessageRequest:FireServer(message, "All")
end

-- Only allow quotes when N is held
UserInputService.InputBegan:Connect(function(input)
	if not nHeld then return end

	local quote = quotes[input.KeyCode]
	if quote then
		sayMessage(quote)

		-- Animation on key 3
		if input.KeyCode == Enum.KeyCode.Three then
			local character = player.Character
			if character then
				local anim = AnimatorModule.new(character, specialAnimId)
				anim.Looped = false
				anim:Play()
			end
		end
	end
end)
